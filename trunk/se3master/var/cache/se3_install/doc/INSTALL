Manuel d'installation de l'interface d'admin
--------------------------------------------

Prérequis:
----------

L'interface d'admin se3 s'installe sur un linux avec les services suivants déjà
configurés et en état de marche:
- apache avec support php (y compris php-ldap) et
autorisation de lancement des cgi depuis le réseau local (désactivé par défaut
sur mdk82)
- mysql avec un mot de passe NON NUL DEFINI pour root

Les paquets suivants doivent être installés mais pas nécessairement configurés
pam-ldap
ldap client et serveur
Samba avec support acl et ldap (optionnel pour l'install de l'interface seule)
Les modules perl pour l'accès à MySQL, LDAP et gettext

- Pour Mandrake, un fichier mdk_preinst.sh installera les paquets nécessaires au fonctionnement de l'interface. 
- Pour woody, ce fichier se nomme woody_preinst.sh.
- Pour RedHat, pas de script de préinstall, mais un fichier RedHat_RPMS.txt dans le dossier doc indiquant les paquets nécessaire ainsi que leur emplacement.

Il sera toutefois nécessaire de télécharger sur 
ftp://193.49.66.139/pub/sambaedu 
le samba compilé pour votre distrib avec support LDAP. J'ai fait pour le moment les paquets pour Debian(potato+woody) RedHat 7.3 et Mandrake 8.2
.

Installation:
-------------

La procédure d'installation est modulaire et se compose de 5 sections. Dans
chaque section, des questions sont posées et des choix par défaut proposés, qui
peuvent être modifiés. En voici le déroulement:

- Détection de la distribution et mise en place des variables adéquates

- Section 1: Installation de l'interface web

- Section 2: Configuration de SambaEdu. Il est d'abord demandé de saisir les
paramètres de connexion à la base de données. Celle-ci accueillera tous les
parametres de SambaEdu (LDAP, chemins etc...).

- Un récapitulatif est ensuite proposé, résumant la configuration établie dans
la section 2. Celui-ci est lu depuis la base de données. Cela permet de vérifier
que les paramètres sont correctement enregistrés. Recomencez la section 2 en
sautant la section 1 vous voulez modifier quelque chose.

- Section 3: Configuration du serveur LDAP. Validez cette section si vous voulez
que votre serveur héberge l'annuaire LDAP. Les fichiers de configuration seront
alors adaptés à la configuration que vous avez saisi (les anciens seront
renommés en .se3sav). Si vous utilisez un serveur LDAP sur une autre machine
(serveur de comm par exemple), sautez cette
section.

- Section 4: Remplissage de l'annuaire avec les entrées et les branches
nécessaires à SambaEdu. Si certaines existent déjà (People, Group) rien ne sera
modifié.

- A cet instant l'interface d'administration devrait être opérationelle ;-) Elle
est accessible à l'adresse http://adresse.du.serveur/se3. Utilisez le compte
admin avec le mot de passe que vous avez saisi. Ce compte est membre du
groupe se3_is_admin qui a tous les droits sur l'interface.

- Section 5: Installation de Samba. Le fichier smb.conf sera modifié et le
répertoire /home/templates contenant les modèles pour les groupes, les
utilisateurs, les machines et les parcs créés.

Chaque section est indépendante de l'autre. Il est donc possible de relancer 
l'installation pour mettre simplement les scripts à jour sans retoucher au 
paramétrage: ne validez dans ce cas que la première section. Il est possible en 
validant les sections 2, 3 ou 4 de se raccrocher à un autre annuaire, etc...

La fabrication d'un paquet debian sera faite dès que j'aurai testé sur woody et 
mis au clair TOUS les paquets nécessaires afin de bien régler les dépendences. 
Idem pour un paquet, si le coeur en dir à quelqun.
